import{_ as n,o as a,c as t,e as s}from"./app-DkUy9m5s.js";const e={},o=s(`<h1 id="流程部署" tabindex="-1"><a class="header-anchor" href="#流程部署"><span>流程部署</span></a></h1><p>进行流程部署时，需要<strong>关注3张表，忽略1张表：</strong></p><ol><li><strong>ACT_RE_DEPLOYMENT</strong> 部署一次新增一条记录，是流程定义部署记录表。</li><li>**ACT_RE_PROCDEF ** 此表的KEY_字段用来区分不同的流程定义（如：工单流程、白名单流程、请假流程、辞职流程等）。</li><li><strong>ACT_GE_BYTEARRAY</strong> ：<code>.bpmn</code> 、 <code>.png</code>等二进制文件都放在这里。</li><li>ACT_GE_PROPERTY ： 操作属性表，每次操作数据库，这张表都会变动。</li></ol><p>基于模型部署的时候需要解决一个问题：<strong><mark>流程图数据结构的解析与反解析</mark></strong>。</p><h2 id="流程图数据结构解析与反解析" tabindex="-1"><a class="header-anchor" href="#流程图数据结构解析与反解析"><span>流程图数据结构解析与反解析</span></a></h2><p>开发工作流引擎，需要前后端定义好流程图的数据结构，一般有两种：<strong>JSON</strong> 或 <strong>XML</strong>，这一步决定了流程能否成功部署。</p><blockquote><p><strong><mark>JSON 2 BpmlModel 2 XML</mark></strong></p></blockquote><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">// modelEditorSource 为JSON结构时</span>
<span class="token class-name">ObjectNode</span> objectNode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ObjectNode</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readTree</span><span class="token punctuation">(</span>modelEditorSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BpmnModel</span> bpmnModel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BpmnJsonConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">convertToBpmnModel</span><span class="token punctuation">(</span>objectNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BpmnXMLConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">convertToXML</span><span class="token punctuation">(</span>bpmnModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JSON格式的流程图：</p><figure><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h74v9mp03ij30x20u0wj4.jpg" alt="image-20220523113023420" tabindex="0" loading="lazy"><figcaption>image-20220523113023420</figcaption></figure><p>转换成XML后：</p><figure><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h74v9lznm5j30xe0u07bd.jpg" alt="image-20220523113357725" tabindex="0" loading="lazy"><figcaption>image-20220523113357725</figcaption></figure><blockquote><p><strong><mark>XML 2 BpmnModel 2 XML</mark></strong></p></blockquote><p>略。</p>`,14),p=[o];function c(i,l){return a(),t("div",null,p)}const u=n(e,[["render",c],["__file","Activiti7 3 流程部署.html.vue"]]),m=JSON.parse('{"path":"/Activiti7%E7%AC%94%E8%AE%B0/Activiti7%203%20%E6%B5%81%E7%A8%8B%E9%83%A8%E7%BD%B2.html","title":"流程部署","lang":"zh-CN","frontmatter":{"description":"流程部署 进行流程部署时，需要关注3张表，忽略1张表： ACT_RE_DEPLOYMENT 部署一次新增一条记录，是流程定义部署记录表。 **ACT_RE_PROCDEF ** 此表的KEY_字段用来区分不同的流程定义（如：工单流程、白名单流程、请假流程、辞职流程等）。 ACT_GE_BYTEARRAY ：.bpmn 、 .png等二进制文件都放在这里...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/yibu_zzn/Activiti7%E7%AC%94%E8%AE%B0/Activiti7%203%20%E6%B5%81%E7%A8%8B%E9%83%A8%E7%BD%B2.html"}],["meta",{"property":"og:site_name","content":"郑振宁的数字资产中心"}],["meta",{"property":"og:title","content":"流程部署"}],["meta",{"property":"og:description","content":"流程部署 进行流程部署时，需要关注3张表，忽略1张表： ACT_RE_DEPLOYMENT 部署一次新增一条记录，是流程定义部署记录表。 **ACT_RE_PROCDEF ** 此表的KEY_字段用来区分不同的流程定义（如：工单流程、白名单流程、请假流程、辞职流程等）。 ACT_GE_BYTEARRAY ：.bpmn 、 .png等二进制文件都放在这里..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://tva1.sinaimg.cn/large/008vxvgGly1h74v9mp03ij30x20u0wj4.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-26T09:32:58.000Z"}],["meta",{"property":"article:author","content":"郑振宁"}],["meta",{"property":"article:modified_time","content":"2024-03-26T09:32:58.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"流程部署\\",\\"image\\":[\\"https://tva1.sinaimg.cn/large/008vxvgGly1h74v9mp03ij30x20u0wj4.jpg\\",\\"https://tva1.sinaimg.cn/large/008vxvgGly1h74v9lznm5j30xe0u07bd.jpg\\"],\\"dateModified\\":\\"2024-03-26T09:32:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"郑振宁\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"流程图数据结构解析与反解析","slug":"流程图数据结构解析与反解析","link":"#流程图数据结构解析与反解析","children":[]}],"git":{"createdTime":1711445578000,"updatedTime":1711445578000,"contributors":[{"name":"一步","email":"zzn_workmail@163.com","commits":1}]},"readingTime":{"minutes":0.9,"words":270},"filePathRelative":"Activiti7笔记/Activiti7 3 流程部署.md","localizedDate":"2024年3月26日","excerpt":"\\n<p>进行流程部署时，需要<strong>关注3张表，忽略1张表：</strong></p>\\n<ol>\\n<li><strong>ACT_RE_DEPLOYMENT</strong> 部署一次新增一条记录，是流程定义部署记录表。</li>\\n<li>**ACT_RE_PROCDEF ** 此表的KEY_字段用来区分不同的流程定义（如：工单流程、白名单流程、请假流程、辞职流程等）。</li>\\n<li><strong>ACT_GE_BYTEARRAY</strong> ：<code>.bpmn</code> 、 <code>.png</code>等二进制文件都放在这里。</li>\\n<li>ACT_GE_PROPERTY ： 操作属性表，每次操作数据库，这张表都会变动。</li>\\n</ol>","autoDesc":true}');export{u as comp,m as data};
