import{_ as e,r as p,o,c,a as n,b as s,d as t,e as i}from"./app-GIsmuAzB.js";const l={},u=n("h1",{id:"prometheus",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#prometheus"},[n("span",null,"Prometheus")])],-1),r={class:"hint-container important"},d=n("p",{class:"hint-container-title"},"重要",-1),k=n("p",null,"Prometheus 是开源的监控和警报工具套件，适用于微服务、容器和动态计算环境，在 Kubernetes 等容器编排平台的社区中非常流行。",-1),m={href:"https://prometheus.io",target:"_blank",rel:"noopener noreferrer"},h=n("figure",null,[n("img",{src:"https://cdn.jsdelivr.net/gh/zhengzhenning/imageBeds@main/images/008i3skNgy1gsffp140x9j311j0mjjtq.jpg",alt:"architecture",tabindex:"0",loading:"lazy"}),n("figcaption",null,"architecture")],-1),v=n("h1",{id:"指标类型-metric-types",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#指标类型-metric-types"},[n("span",null,"指标类型（Metric Types）")])],-1),g={href:"https://prometheus.io/docs/concepts/metric_types/",target:"_blank",rel:"noopener noreferrer"},b={href:"https://blog.csdn.net/liangcha007/article/details/86699013?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.base&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-2.base",target:"_blank",rel:"noopener noreferrer"},f=i(`<h2 id="计数器-counter" tabindex="-1"><a class="header-anchor" href="#计数器-counter"><span>计数器（Counter）</span></a></h2><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>prometheus<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Counter</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">YourClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Counter</span> requests <span class="token operator">=</span> <span class="token class-name">Counter</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;requests_total&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token string">&quot;Total requests.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    requests<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Your code here.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="计量器-gauge" tabindex="-1"><a class="header-anchor" href="#计量器-gauge"><span>计量器（Gauge）</span></a></h2><p>计量器，可增可减，可升可降。</p><p>一般用于：</p><ul><li>监测并发请求数量</li><li>监测CPU使用率</li><li>监测JVM线程数量等</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">YourClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Gauge</span> inprogressRequests <span class="token operator">=</span> <span class="token class-name">Gauge</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;inprogress_requests&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token string">&quot;Inprogress requests.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inprogressRequests<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Your code here.</span>
    inprogressRequests<span class="token punctuation">.</span><span class="token function">dec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="摘要-summary" tabindex="-1"><a class="header-anchor" href="#摘要-summary"><span>摘要（Summary）</span></a></h2><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">YourClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Summary</span> receivedBytes <span class="token operator">=</span> <span class="token class-name">Summary</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;requests_size_bytes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token string">&quot;Request size in bytes.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Summary</span> requestLatency <span class="token operator">=</span> <span class="token class-name">Summary</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;requests_latency_seconds&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token string">&quot;Request latency in seconds.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Summary<span class="token punctuation">.</span>Timer</span> requestTimer <span class="token operator">=</span> requestLatency<span class="token punctuation">.</span><span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// Your code here.</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      receivedBytes<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      requestTimer<span class="token punctuation">.</span><span class="token function">observeDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="直方图-histogram" tabindex="-1"><a class="header-anchor" href="#直方图-histogram"><span>直方图（Histogram）</span></a></h2><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">YourClass</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Histogram</span> requestLatency <span class="token operator">=</span> <span class="token class-name">Histogram</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;requests_latency_seconds&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token string">&quot;Request latency in seconds.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token class-name">Request</span> req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Histogram<span class="token punctuation">.</span>Timer</span> requestTimer <span class="token operator">=</span> requestLatency<span class="token punctuation">.</span><span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// Your code here.</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      requestTimer<span class="token punctuation">.</span><span class="token function">observeDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="命名规范" tabindex="-1"><a class="header-anchor" href="#命名规范"><span>命名规范</span></a></h1>`,12),y={href:"https://prometheus.io/docs/practices/naming/",target:"_blank",rel:"noopener noreferrer"};function _(q,j){const a=p("ExternalLinkIcon");return o(),c("div",null,[u,n("div",r,[d,k,n("ul",null,[n("li",null,[n("a",m,[s("https://prometheus.io"),t(a)])])])]),h,v,n("ul",null,[n("li",null,[n("a",g,[s("https://prometheus.io/docs/concepts/metric_types/"),t(a)]),s(" 指标介绍")]),n("li",null,[s("Java 集成 Prometheus，参考"),n("a",b,[s("这篇"),t(a)]),s("。")])]),f,n("ul",null,[n("li",null,[n("a",y,[s("https://prometheus.io/docs/practices/naming/"),t(a)]),s(" 命名规范最佳实践")])])])}const x=e(l,[["render",_],["__file","Prometheus.html.vue"]]),B=JSON.parse('{"path":"/%E7%BB%84%E4%BB%B6%E7%AC%94%E8%AE%B0/Prometheus.html","title":"Prometheus","lang":"zh-CN","frontmatter":{"description":"Prometheus 重要 Prometheus 是开源的监控和警报工具套件，适用于微服务、容器和动态计算环境，在 Kubernetes 等容器编排平台的社区中非常流行。 https://prometheus.io architecturearchitecture 指标类型（Metric Types） https://prometheus.io/doc...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/%E7%BB%84%E4%BB%B6%E7%AC%94%E8%AE%B0/Prometheus.html"}],["meta",{"property":"og:site_name","content":"郑振宁的数字资产中心"}],["meta",{"property":"og:title","content":"Prometheus"}],["meta",{"property":"og:description","content":"Prometheus 重要 Prometheus 是开源的监控和警报工具套件，适用于微服务、容器和动态计算环境，在 Kubernetes 等容器编排平台的社区中非常流行。 https://prometheus.io architecturearchitecture 指标类型（Metric Types） https://prometheus.io/doc..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.jsdelivr.net/gh/zhengzhenning/imageBeds@main/images/008i3skNgy1gsffp140x9j311j0mjjtq.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-16T02:29:32.000Z"}],["meta",{"property":"article:author","content":"郑振宁"}],["meta",{"property":"article:modified_time","content":"2024-04-16T02:29:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Prometheus\\",\\"image\\":[\\"https://cdn.jsdelivr.net/gh/zhengzhenning/imageBeds@main/images/008i3skNgy1gsffp140x9j311j0mjjtq.jpg\\"],\\"dateModified\\":\\"2024-04-16T02:29:32.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"郑振宁\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"计数器（Counter）","slug":"计数器-counter","link":"#计数器-counter","children":[]},{"level":2,"title":"计量器（Gauge）","slug":"计量器-gauge","link":"#计量器-gauge","children":[]},{"level":2,"title":"摘要（Summary）","slug":"摘要-summary","link":"#摘要-summary","children":[]},{"level":2,"title":"直方图（Histogram）","slug":"直方图-histogram","link":"#直方图-histogram","children":[]}],"git":{"createdTime":1712910044000,"updatedTime":1713234572000,"contributors":[{"name":"一步","email":"zzn_workmail@163.com","commits":3}]},"readingTime":{"minutes":0.95,"words":286},"filePathRelative":"组件笔记/Prometheus.md","localizedDate":"2024年4月12日","excerpt":"\\n<div class=\\"hint-container important\\">\\n<p class=\\"hint-container-title\\">重要</p>\\n<p>Prometheus 是开源的监控和警报工具套件，适用于微服务、容器和动态计算环境，在 Kubernetes 等容器编排平台的社区中非常流行。</p>\\n<ul>\\n<li><a href=\\"https://prometheus.io\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://prometheus.io</a></li>\\n</ul>\\n</div>\\n<figure><img src=\\"https://cdn.jsdelivr.net/gh/zhengzhenning/imageBeds@main/images/008i3skNgy1gsffp140x9j311j0mjjtq.jpg\\" alt=\\"architecture\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>architecture</figcaption></figure>","autoDesc":true}');export{x as comp,B as data};
